
<?xml version="1.0" encoding="utf-8"?>
<ul>
    <li>OverviewSettingupWindowsSubsystemforLinux(WSL)issimple,butfull-timedevelopmentinWSLrequiresextrasetupandworkarounds.Let’sdocumentsomeoftheseproblem-solutions!RunGUIAppsinWSLRungraphicalapplicationsinWSLbysettingupadisplayserveronWindowshostmachine.SetupVcXSrvWindowsInstallVcXSrvWindowsAllowVcXSrvinfirewallrulesWSLAddto~/.bashrc:exportDISPLAY=$(cat/etc/resolv.conf|grepnameserver|awk'{print$2;exit;}'):0.0exportLIBGL_ALWAYS_INDIRECT=1#sudo/etc/init.d/dbusstart&amp;&gt;/dev/nulllVSCodeDevcontainerWecanevenrunGUIapplicationsfromVSCodeDevcontainers.UItestsuitesindevmode?Notaproblem.Addtoproject’sdevcontainer.json:"runArgs":{"--network=host"},"containerEnv":{"DISPLAY":"${localEnv:DISPLAY}"}MachineLearninginWSLRunmachinelearning,oranycodethatrequiresGPUdrivers,insideWSL.Takendirectlyfromthissite.Fulldetailsforthispostatdocs.nvidia.com/cuda/wsl-user-guide,thispostexpandslinks’instructionsanddistillsjusttheessentialcommandswithoutcontext.InstallNvidiaWSL2-compatibledriverNvidialink&gt;GetCUDADriver&gt;download,installInstallDocker+NvidiastuffInstallDockerandNvidiastuff$distribution=$(./etc/os-release;echo$ID$VERSION_ID)$curl-s-Lhttps://nvidia.github.io/nvidia-docker/gpgkey|sudoapt-keyadd-$curl-s-Lhttps://nvidia.github.io/nvidia-docker/$distribution/nvidia-docker.list|sudotee/etc/apt/sources.list.d/nvidia-docker.list$curl-s-Lhttps://nvidia.github.io/libnvidia-container/experimental/$distribution/libnvidia-container-experimental.list|sudotee/etc/apt/sources.list.d/libnvidia-container-experimental.listRestartDockerserviceTestdockerrun--gpusallnvcr.io/nvidia/k8s/cuda-sample:nbodynbody-gpu-benchmarkAutostartSSHAgentinWSLAddto~/.bashrc:#StartsSSH-Agent,asksidentity/keypasswordsperlinuxboot/startupSSH_ENV="$HOME/.ssh/agent-environment"functionstart_agent{echo"InitialisingnewSSHagent..."/usr/bin/ssh-agent|sed's/^echo/#echo/'&gt;"${SSH_ENV}"echosucceededchmod600"${SSH_ENV}"."${SSH_ENV}"&gt;/dev/null/usr/bin/ssh-add;}if[-f"${SSH_ENV}"];then."${SSH_ENV}"&gt;/dev/null#ps${SSH_AGENT_PID}doesn'tworkundercywginps-ef|grep${SSH_AGENT_PID}|grepssh-agent$&gt;/dev/null||{start_agent;}elsestart_agent;fiForwardGPGKeysForwardGPGkeysfromWSLtoVSCodedevcontainers.InstallGpg4winonWindowsInstallsocatinWSLdistro.sudoaptinstallsocatInstallgpginWSLdistro.sudoaptinstallgpgRegisterapinentryGUIinWSLdistro.echopinentry-program/mnt/c/Program\Files\\(x86\)/Gpg4win/bin/pinentry.exe&gt;~/.gnupg/gpg-agent.confReloadgpgagentinWSL.gpg-connect-agentreloadagent/byeAddcommandtoforwardGPGTTYinbashrcfileinWSLdistro.exportGPG_TTY=$(tty)BeautifulWSLTerminalZshell(zsh)andCobalt2ThememakesaWindowsterminalandshellpretty,eveninsidedevcontainers!InstallZshandOMZInstallWindowsTerminal(Microsoftproduct)InstallZshell(https://github.com/ohmyzsh/ohmyzsh/wiki/Installing-ZSH)-mightneedtorestartwindowsterminaltoseethedefaultshellchangeAddto~/.zshrctoundodefaultLESS-Rinvocation.unsetLESSInstalloh-my-zsh(https://github.com/ohmyzsh/ohmyzsh)-usethesimplewgetinstallbashscriptSetupCobalt2ThemeDownloadcolablt2.zsh-themeintoyouroh-my-zshthemedirectoryinyourlinuxdistrofromhttps://github.com/wesbos/Cobalt2-itermandsetthemeasyourdefault(changevartoZSH_THEME=”cobalt2”infile~/.zshrc)Downloadfontandinstallonwindows“InconsolataforPowerline.otf”fromhttps://github.com/powerline/fonts/tree/master/InconsolataSetupWindowsTerminalcobalt2themewithinstructionsfromhttps://github.com/Reidond/cobalt2-windows-terminalRestartWindowsTerminalandgoddamnitlooksgoodZshinDevcontainerVSCodedevcontainerscanbebeautifultoo.PutinDockerfile:USERvscodeRUN\#zshcobalt2themewgethttps://raw.githubusercontent.com/wesbos/Cobalt2-iterm/master/cobalt2.zsh-theme-P~/.oh-my-zsh/themes/\&amp;&amp;sed-i-e's/ZSH_THEME="codespaces"/ZSH_THEME="cobalt2"/g'~/.zshrc\#unsetzsh'sdefaultLESS-R&amp;&amp;echo"\n\nunsetLESS\n"&gt;&gt;~/.zshrc\#zshautosuggestionsplugin&amp;&amp;gitclonehttps://github.com/zsh-users/zsh-autosuggestions~/.oh-my-zsh/custom/plugins/zsh-autosuggestions\&amp;&amp;sed-i-e's/plugins=(git)/plugins=(gitzsh-autosuggestions)/g'~/.zshrcUSERrootPutindevcontainer.json:{"settings":{"terminal.integrated.defaultProfile.linux":"zsh","terminal.integrated.profiles.linux":{"zsh":{"path":"/bin/zsh"}},//MightneedsometinkeringonWindows,notnecessaryonMacs"terminal.integrated.fontSize":16,"terminal.integrated.fontFamily":"InconsolataforPowerline"}}Revisions2022-02-12:AddZshsections2022-01-26:Addgpgandsshkeysforwarding2021-11-12:Initialcommit</li>
</ul>